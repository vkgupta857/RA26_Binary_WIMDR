{% extends 'base.html' %}

{% block head %}
<title>Statistics - Waste Management</title>
<style>
    .chart-container {
        max-height: 400px;
        overflow: auto;
    }
</style>
{% endblock %}


{% block body %}
<div class="container">
    <div class="row">
        <div class="col-md-12">
            <div class="card">
                <div class="card-body">
                    <div id="week-chart-container" class="chart-container"></div>
                </div>
            </div>
        </div>
    </div>
    <br>
    <div class="row">
        <div class="col-md-6">
            <div class="card">
                <div class="card-body">
                    <div id="monday-chart-container" class="chart-container"></div>
                </div>
            </div>
        </div>
        <div class="col-md-6">
            <div class="card">
                <div class="card-body">
                    <div id="tuesday-chart-container" class="chart-container"></div>
                </div>
            </div>
        </div>
    </div>
    <br>
    <div class="row">
        <div class="col-md-6">
            <div class="card">
                <div class="card-body">
                    <div id="query-stats-chart-container" class="chart-container"></div>
                </div>
            </div>
        </div>
    </div>

</div>

<!-- Step 1 - Include the fusioncharts core library -->
<script type="text/javascript" src="https://cdn.fusioncharts.com/fusioncharts/latest/fusioncharts.js"></script>
<!-- Step 2 - Include the fusion theme -->
<script type="text/javascript"
    src="https://cdn.fusioncharts.com/fusioncharts/latest/themes/fusioncharts.theme.fusion.js"></script>

<script type="text/javascript">

    const weekDataSource = {
        chart: {
            caption: "Waste Index Graph over the week",
            subcaption: "Category wise percentage of waste reported",
            xaxisname: "Days",
            yaxisname: "Waste index",
            formatnumberscale: "1",
            plottooltext:
                "<b>$dataValue</b>% <b>$seriesName</b> reported on $label",
            theme: "fusion",
            drawcrossline: "1"
        },
        categories: [
            {
                category: [

                    {
                        label: "Monday"
                    },
                    {
                        label: "Tuesday"
                    },
                    {
                        label: "Wednesday"
                    },
                    {
                        label: "Thursday"
                    },
                    {
                        label: "Friday"
                    }
                    ,
                    {
                        label: "Saturday"
                    }
                    ,
                    {
                        label: "Sunday"
                    }
                ]
            }
        ],
        dataset: [
            {
                seriesname: "high waste",
                data: [
                    {
                        value: "98"
                    },
                    {
                        value: "34"
                    },
                    {
                        value: "2"
                    },
                    {
                        value: "25"
                    },
                    {
                        value: "59"
                    },
                    {
                        value: "23"
                    },
                    {
                        value: "7"
                    }
                ]
            },
            {
                seriesname: "medium waste",
                data: [
                    {
                        value: "2"
                    },
                    {
                        value: "53"
                    },
                    {
                        value: "8"
                    },
                    {
                        value: "70"
                    },
                    {
                        value: "29"
                    },
                    {
                        value: "57"
                    },
                    {
                        value: "34"
                    }

                ]
            },
            {
                seriesname: "low waste",
                data: [
                    {
                        value: "0"
                    },
                    {
                        value: "13"
                    },
                    {
                        value: "90"
                    },
                    {
                        value: "5"
                    },
                    {
                        value: "12"
                    },
                    {
                        value: "20"
                    },
                    {
                        value: "59"
                    }
                ]
            }
        ]
    };

    const mondayDataSource = {
        chart: {
            caption: "Queries reported on Monday",
            plottooltext: "<b>$percentValue</b> of $label reported",
            showlegend: "1",
            showpercentvalues: "1",
            legendposition: "bottom",
            usedataplotcolorforlabels: "1",
            theme: "fusion"
        },
        data: [
            {
                label: "high waste",
                value: "98"
            },
            {
                label: "medium waste",
                value: "2"
            },
            {
                label: "low waste",
                value: "0"
            }
        ]
    };

    const tuesdayDataSource = {
        chart: {
            caption: "Queries reported on Tuesday",
            plottooltext: "<b>$percentValue</b> of $label reported",
            showlegend: "1",
            showpercentvalues: "1",
            legendposition: "bottom",
            usedataplotcolorforlabels: "1",
            theme: "fusion"
        },
        data: [
            {
                label: "high waste",
                value: "34"
            },
            {
                label: "medium waste",
                value: "53"
            },
            {
                label: "low waste",
                value: "13"
            }
        ]
    };

    const queryStatsDataSource = {
        chart: {
            caption: "Waste query generated and resolved over the week",
            xaxisname: "Days",
            yaxisname: "Queries",
            formatnumberscale: "1",
            plottooltext:
                "<b>$dataValue</b> <b>$seriesName</b> on $label",
            theme: "fusion",
            drawcrossline: "1"
        },
        categories: [
            {
                category: [

                    {
                        label: "Monday"
                    },
                    {
                        label: "Tuesday"
                    },
                    {
                        label: "Wednesday"
                    },
                    {
                        label: "Thursday"
                    },
                    {
                        label: "Friday"
                    }
                    ,
                    {
                        label: "Saturday"
                    }
                    ,
                    {
                        label: "Sunday"
                    }
                ]
            }
        ],
        dataset: [

            {
                seriesname: "Waste Queries reported",
                data: [
                    {
                        value: "2]"
                    },
                    {
                        value: "53"
                    },
                    {
                        value: "8"
                    },
                    {
                        value: "70"
                    },
                    {
                        value: "29"
                    },
                    {
                        value: "57"
                    },
                    {
                        value: "34"
                    }

                ]
            },
            {
                seriesname: "Queries resolved",
                data: [
                    {
                        value: "20"
                    },
                    {
                        value: "31"
                    },
                    {
                        value: "10"
                    },
                    {
                        value: "51"
                    },
                    {
                        value: "12"
                    },
                    {
                        value: "20"
                    },
                    {
                        value: "34"
                    }
                ]
            }
        ]
    };

    FusionCharts.ready(function () {
        var weekChart = new FusionCharts({
            type: "mscolumn3d",
            width: "100%",
            height: "500%",
            renderAt: "week-chart-container",
            dataFormat: "json",
            dataSource: weekDataSource
        }).render();

        var mondayChart = new FusionCharts({
            type: "pie3d",
            renderAt: "monday-chart-container",
            width: "80%",
            height: "500%",
            dataFormat: "json",
            dataSource: mondayDataSource
        }).render();

        var tuesdayChart = new FusionCharts({
            type: "pie3d",
            renderAt: "tuesday-chart-container",
            width: "80%",
            height: "500%",
            dataFormat: "json",
            dataSource: tuesdayDataSource
        }).render();

        var queryStatsChart = new FusionCharts({
            type: "mscolumn3d",
            width: "100%",
            height: "500%",
            renderAt: "query-stats-chart-container",
            dataFormat: "json",
            dataSource: queryStatsDataSource
        }).render();
    });

</script>
{% endblock %}